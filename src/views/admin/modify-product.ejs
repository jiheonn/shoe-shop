<!DOCTYPE html>
<html lang="en">
  <head>
    <% include ./common/head-meta %>
    <!-- Table datatable css -->
    <link
      href="/assets/libs/datatables/dataTables.bootstrap4.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="/assets/libs/datatables/responsive.bootstrap4.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="/assets/libs/datatables/buttons.bootstrap4.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="/assets/libs/datatables/fixedHeader.bootstrap4.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="/assets/libs/datatables/scroller.bootstrap4.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="/assets/libs/datatables/dataTables.colVis.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="/assets/libs/datatables/fixedColumns.bootstrap4.min.css"
      rel="stylesheet"
      type="text/css"
    />
  </head>

  <body>
    <!-- Begin page -->
    <div id="wrapper">
      <% include ./common/leftbar %>
      <!-- ============================================================== -->
      <!-- Start Page Content here -->
      <!-- ============================================================== -->

      <div class="content-page">
        <div class="content">
          <!-- Start Content-->
          <div class="container-fluid">
            <!-- start page title -->
            <div class="row">
              <div class="col-12">
                <div class="page-title-box">
                  <h4 class="page-title">상품 수정</h4>
                </div>
              </div>
            </div>
            <!-- end page title -->

            <div class="row">
              <div class="col-sm-12">
                <div class="card-box table-responsive">
                  <form
                    action="/admin/products/modify/<%= productInfo.p_id %>"
                    method="POST"
                    enctype="multipart/form-data"
                  >
                    <div class="col-2">
                      <select class="custom-select mb-2" name="b_id" required>
                        <option value="">브랜드</option>
                        <% for (brand of brandList) { %>
                        <option value="<%= brand.b_id %>">
                          <%= brand.b_name %>
                        </option>
                        <% } %>
                      </select>
                      <select class="custom-select mb-2" name="c_id" required>
                        <option value="">카테고리</option>
                        <% for (category of categoryList) { %>
                        <option value="<%= category.c_id %>">
                          <%= category.c_name %>
                        </option>
                        <% } %>
                      </select>
                      <select class="custom-select" name="p_type" required>
                        <option value="">상품타입</option>
                        <option value="0">남녀공용</option>
                        <option value="1">남성용</option>
                        <option value="2">여성용</option>
                      </select>
                    </div>
                    <div class="col-4 mt-5 mb-5">
                      <label class="mr-2" for="p_id">품번 : </label>
                      <input
                        type="text"
                        name="p_id"
                        placeholder="품번을 입력해 주세요."
                        style="width: 215px; text-align: center"
                        value="<%= productInfo.p_id %>"
                        readonly
                        required
                      />
                    </div>
                    <div class="col-4 mb-5">
                      <label class="mr-2" for="p_name">상품명 : </label>
                      <input
                        type="text"
                        name="p_name"
                        placeholder="상품명을 입력해 주세요."
                        style="width: 215px; text-align: center"
                        value="<%= productInfo.p_name %>"
                        required
                      />
                    </div>
                    <div class="col-4 mb-5">
                      <label class="mr-2" for="p_price">상품가격 : </label>
                      <input
                        type="text"
                        name="p_price"
                        placeholder="상품가격을 입력해 주세요."
                        style="width: 215px; text-align: center"
                        value="<%= productInfo.p_price %>"
                        required
                      />
                    </div>
                    <div class="col-4 mb-5">
                      <label class="mr-2" for="p_description">상품설명 : </label
                      ><br />
                      <textarea
                        name="p_description"
                        placeholder="상품설명을 입력해 주세요."
                        style="width: 300px; height: 200px; padding: 10px"
                        required
                      >
<%= productInfo.p_description %></textarea
                      >
                    </div>
                    <div class="col-8 mb-5">
                      <label class="mr-2" for="p_image">상품이미지 : </label
                      ><br />
                      <img
                        id="prev_p_image"
                        src="<%= productInfo.p_image %>"
                        alt=""
                      />
                      <p style="color: red">
                        * 이미지를 그대로 사용하신다면 넘어가셔도 됩니다.
                      </p>
                      <input
                        type="file"
                        name="p_image"
                        accept="image/jpeg, image/jpg, image/png"
                      />
                    </div>
                    <div class="ml-2">
                      <button
                        type="submit"
                        style="border: 0; width: 100px; height: 30px"
                      >
                        저장하기
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
            <!-- end row -->
          </div>
          <!-- end container-fluid -->
        </div>
        <!-- end content -->

        <!-- Footer Start -->
        <% include ./common/footer %>
        <!-- end Footer -->
      </div>

      <!-- ============================================================== -->
      <!-- End Page content -->
      <!-- ============================================================== -->
    </div>
    <!-- END wrapper -->

    <% include ./common/foot-meta %>

    <!-- Datatable plugin js -->
    <script src="/assets/libs/datatables/jquery.dataTables.min.js"></script>
    <script src="/assets/libs/datatables/dataTables.bootstrap4.min.js"></script>

    <script src="/assets/libs/datatables/dataTables.responsive.min.js"></script>
    <script src="/assets/libs/datatables/responsive.bootstrap4.min.js"></script>

    <script src="/assets/libs/datatables/dataTables.buttons.min.js"></script>
    <script src="/assets/libs/datatables/buttons.bootstrap4.min.js"></script>

    <script src="/assets/libs/datatables/buttons.html5.min.js"></script>
    <script src="/assets/libs/datatables/buttons.print.min.js"></script>

    <script src="/assets/libs/datatables/dataTables.keyTable.min.js"></script>
    <script src="/assets/libs/datatables/dataTables.fixedHeader.min.js"></script>
    <script src="/assets/libs/datatables/dataTables.scroller.min.js"></script>
    <script src="/assets/libs/datatables/dataTables.fixedColumns.min.js"></script>

    <script src="/assets/libs/jszip/jszip.min.js"></script>
    <script src="/assets/libs/pdfmake/pdfmake.min.js"></script>
    <script src="/assets/libs/pdfmake/vfs_fonts.js"></script>

    <!-- Datatables init -->
    <script src="/assets/js/pages/datatables.init.js"></script>

    <script>
      $(document).ready(() => {
        const b_id = '<%= productInfo.b_id %>'
        const c_id = '<%= productInfo.c_id %>'
        const p_type = '<%= productInfo.p_type %>'

        $('select[name=b_id] option[value=' + b_id + ']').attr('selected', true)

        $('select[name=c_id] option[value=' + c_id + ']').attr('selected', true)

        $('select[name=p_type] option[value=' + p_type + ']').attr(
          'selected',
          true
        )
      })

      $('input[name=p_image]').change(() => {
        $('#prev_p_image').remove()
      })
    </script>
  </body>
</html>
